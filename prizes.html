<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Prizes - Kopala FPL</title>
    <link rel="manifest" href="manifest.json">
    <meta name="theme-color" content="#37003c">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="Kopala FPL">
    <link rel="icon" type="image/x-icon" href="/favicon.ico">
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="nav.css">
    <link rel="stylesheet" href="footer.css">

    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700;800;900&display=swap" rel="stylesheet">

    <style>
    
  /* --- Material You & FPL Theme Variables --- */
:root {
    --fpl-purple: #37003c;
    --fpl-pink: #ff0055;
    --md-surface: #fdfbff; /* Material Surface */
    --md-surface-variant: #f3eff4; /* Shaded sections */
    --md-primary: #37003c;
    --md-secondary: #00aaff;
    --text-main: #1d1b20;
    --text-sub: #49454f;
    --radius-lg: 28px; /* Material You rounded corners */
    --radius-md: 16px;
}

body {
    margin: 0;
    padding: 0;
    font-family: 'Inter', sans-serif;
    background-color: var(--md-surface);
    color: var(--text-main);
}

.prizes-content {
    padding: 24px 16px;
    max-width: 600px;
    margin: 0 auto;
}

/* Material Typography */
h1 {
    font-size: 32px;
    font-weight: 800;
    letter-spacing: -0.5px;
    color: var(--fpl-purple);
    margin-bottom: 24px;
}

/* --- Manager of the Week (Floating Card) --- */
.live-banner {
    background: var(--fpl-purple);
    color: white;
    padding: 20px;
    margin-bottom: 32px;
    display: flex;
    align-items: center;
    gap: 16px;
    border-radius: var(--radius-lg);
    box-shadow: 0 8px 24px rgba(55, 0, 60, 0.15);
}

.live-banner i { 
    background: rgba(255, 255, 255, 0.2);
    width: 48px;
    height: 48px;
    display: flex;
    align-items: center;
    justify-content: center;
    border-radius: 50%;
    color: #ffd700; 
    font-size: 22px; 
}

#winner-name { 
    font-size: 18px;
    font-weight: 700; 
}

/* --- Prize Section Containers --- */
.prize-card {
    background: var(--md-surface-variant);
    padding: 24px;
    border-radius: var(--radius-lg);
    margin-bottom: 16px;
    border: 1px solid rgba(0,0,0,0.03);
    transition: transform 0.2s ease;
}

.prize-card:active {
    transform: scale(0.98);
}

.prize-card h3 {
    margin: 0 0 12px 0;
    font-size: 18px;
    font-weight: 800;
    color: var(--fpl-purple);
    display: flex;
    align-items: center;
    gap: 8px;
}

.prize-list {
    list-style: none;
    margin: 0;
    padding: 0;
}

.prize-list li {
    font-size: 14px;
    font-weight: 500;
    color: var(--text-sub);
    padding: 8px 0;
    display: flex;
    align-items: center;
    gap: 10px;
}

.prize-list li::before {
    content: "\f058"; /* FontAwesome Check Circle */
    font-family: "Font Awesome 6 Free";
    font-weight: 900;
    color: var(--fpl-pink);
    font-size: 16px;
}

/* Small Sub-headers */
.section-title {
    font-size: 12px;
    text-transform: uppercase;
    font-weight: 900;
    color: var(--fpl-pink);
    letter-spacing: 1.5px;
    margin: 32px 0 12px 10px;
}
      </style>  
</head>
<body>

    <div id="nav-placeholder"></div>

  <h1>Prizes</h1>
    
    <div class="live-banner">
        <i class="fa-solid fa-crown"></i>
        <div>
            <div style="text-transform: uppercase; font-size: 10px; font-weight: 800; opacity: 0.8; letter-spacing: 1px;">Manager of the Week</div>
            <div id="winner-name">Syncing standings...</div>
        </div>
    </div>

    <div class="section-title">End of Season Rewards</div>

    <div class="prize-card">
        <h3><i class="fa-solid fa-trophy" style="color:#FFD700"></i> Champion</h3>
        <ul class="prize-list">
            <li>Custom 2025/26 Champion Jersey</li>
            <li>Cash Prize (Amount TBC)</li>
            <li>Kopala FPL Hall of Fame Entry</li>
        </ul>
    </div>

    <div class="prize-card">
        <h3><i class="fa-solid fa-medal" style="color:#C0C0C0"></i> Runner-up</h3>
        <ul class="prize-list">
            <li>Official Premier League Merchandise</li>
            <li>Cash Prize</li>
        </ul>
    </div>

    <div class="section-title">Tournament Cups</div>

    <div class="prize-card">
        <h3><i class="fa-solid fa-award" style="color:var(--md-secondary)"></i> Cup Winner</h3>
        <ul class="prize-list">
            <li>Kopala Cup Trophy (Digital)</li>
            <li>Branded Sports Kit</li>
        </ul>
    </div>
       
    </main>

    <script src="nav.js"></script>

    <script>
        async function fetchLiveWinner() {
            const leagueId = "101712";
            const nameField = document.getElementById('winner-name');
            
            // This works because of your netlify.toml redirect
            const url = `/fpl-api/leagues-classic/${leagueId}/standings/`;

            try {
                const response = await fetch(url);
                if (!response.ok) throw new Error('Proxy error');
                
                const data = await response.json();
                const standings = data.standings.results;

                // Find manager with highest points in the CURRENT Gameweek
                const topScorer = standings.reduce((max, p) => 
                    (p.event_total > max.event_total) ? p : max, standings[0]
                );

                nameField.innerHTML = `${topScorer.player_name} <span style="color:var(--accent-blue)">(${topScorer.event_total} pts)</span>`;
            } catch (error) {
                console.error("FPL Data Error:", error);
                nameField.innerText = "Standings temporarily unavailable";
            }
        }

        document.addEventListener('DOMContentLoaded', fetchLiveWinner);
    </script>
   <div id="footer-placeholder"></div>
<script src="footer.js"></script>
</body>
</html>
